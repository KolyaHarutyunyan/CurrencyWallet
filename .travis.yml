cache:
  directories:
    - node_modules
    - ~/.cache
  yarn: true
language: node_js
node_js:
  - "8"
before_script:
  - git submodule update --init --recursive
  - yarn add coveralls --save-dev
  - yarn add mocha jsdom jest react-test-renderer --save-dev
  - yarn add chai --save-dev
  - yarn add jsdom --save-dev
  - yarn add jest --save-dev
  - yarn add react-test-renderer --save-dev
  - echo "_________YARN install___________"
  - yarn install
  - echo "__________YARN start____________"
  - yarn start &
script:
  - echo "____________TEST________________"
  - yarn test:unit -- --coverage && yarn test:snapshot -- --coverage
  - yarn test
  - echo "____________LINT________________"
  - yarn eslint
  - echo "________Build mainnet___________"
  - yarn build:mainnet
  - echo "________Build testnet___________"
  - yarn build:testnet
  - echo "_________Build local____________"
  - yarn build:local
  - ls
after_script:
  - COVERALLS_REPO_TOKEN=$coveralls_repo_token yarn coveralls
